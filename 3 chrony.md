---
создал заметку: "2025-03-09"
---
**Chrony** — это гибкая реализация протокола сетевого времени Network Time Protocol (NTP). Используется для синхронизации системных часов с различных NTP-серверов, эталонных часов или с помощью ручного ввода.

**Chrony** поставляется с двумя **программами**:
- **chronyc** — интерфейс командной строки для службы Chrony;
- **chronyd** — служба, которая может быть запущена во время загрузки системы.

Установка:
**`apt install chrony`** 

Проверим статус:
**`systemctl status chronyd`**

Проверка синхронизации:
**`chronyc tracking`** 

- **Reference ID** — идентификатор и имя сервера, с которым компьютер в настоящее время синхронизирован;
- **Stratum** — количество переходов к серверу с установленными эталонными часами;
- **Ref time** — время по Гринвичу, в которое было выполнено последнее измерение из эталонного источника;
- **System time** — задержка системных часов от синхронизированного сервера;
- **Last offset** — расчетное смещение последнего обновления часов;
- **RMS offset** — долгосрочное среднее арифметическое значения смещения;
- **Frequency** — частота, на которой часы системы будут работать неправильно, если хронограф не проведет коррекцию. Она выражена в ppm — ч/м (частей на миллион);
- **Residual freq** — остаточная частота указывает на разницу между измерениями от опорного источника и используемой в настоящее время частотой;
- **Skew** — расчетная погрешность, связанная с погрешностью частоты;
- **Root delay** — суммарная задержка сетевого пути к опорному серверу, с которым синхронизируется компьютер;
- **Leap status** — статус скачка (изменения) времени, который может иметь одно из следующих значений:
- _«Normal»_ – означает нормальную корректировку времени;
- _«Insert second»_ – означает, что произведена корректировка времени добавлением дополнительной секунды в последнюю минуту текущего месяца;
- _«Delete second»_ – означает, что произведена корректировка времени удалением дополнительной секунды из последней минуты текущего месяца;
- _«Not synchronised»_ – означает, что компьютер в данный момент времени не синхронизирован.

Проверить информацию об источниках:
**`chronyc sources`**

Найти статистику каждого источника, скорость дрейфа, процесс оценки смещения:
**`chronyc sourcestats`**

Чтобы сообщить **Chrony**, что вы больше не подключены к глобальной сети Интернет:
**`chronyc offline`**

Для проверки статуса источников **NTP**:
**`chronyc activity`**

Когда система будет вновь подключена к Интернету, необходимо сообщить об этом **chrony**:
**`chronyc online`**

Конфигурационный файл находится по адресу **/etc/chrony.conf** или **/etc/chrony/chrony.conf**

Пример конфигурации:

```conf
server 0.rhel.pool.ntp.org iburst
server 1.rhel.pool.ntp.org iburst
server 2.rhel.pool.ntp.org iburst
server 3.rhel.pool.ntp.org iburst

stratumweight 0
driftfile /var/lib/chrony/drift
makestep 10 3
logdir /var/log/chrony
```

- **server** — данная директива описывает NTP-сервер, с которым необходимо синхронизироваться.
- **stratumweight** — какую задержку следует добавить к источнику синхронизации для каждой группы. Значение по умолчанию — 0,0001.
- **driftfile** —расположение и имя файла, содержащего данные смещения.
- **Makestep** — эта директива заставляет сервис постепенно корректировать любое смещение во времени путем снижения скорости или замедления хода часов по мере необходимости.
- **logdir** — путь к файлу журнала chrony.